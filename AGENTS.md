# Repository Guidelines

## Project Structure & Module Organization

- `src/`: React + Vite frontend (routes, components, hooks, contexts, i18n).
- `server/`: Node/Express backend, WebSocket server, and CLI integrations.
  - `server/routes/`: REST API endpoints (`/api/...`).
  - `server/database/`: SQLite schema and migrations (`init.sql`, `db.js`).
- `shared/`: Code shared between client/server (constants, helpers).
- `public/`: Static assets (PWA icons, screenshots, `sw.js`).
- `dist/`: Production build output (generated by Vite).

## Build, Test, and Development Commands

- `npm install`: Install dependencies.
- `cp .env.example .env`: Create local config (see `PORT`, `VITE_PORT`, optional `DATABASE_PATH`).
- `npm run dev`: Run backend + Vite in watch mode (Vite proxies `/api`, `/ws`, `/shell` to the backend).
- `npm run server`: Run backend only (default `http://localhost:3001`).
- `npm run client`: Run Vite dev server only (default `http://localhost:5173`).
- `npm run build`: Build frontend into `dist/`.
- `npm run preview`: Preview `dist/` via Vite.
- `npm run start`: Build then start the backend (serves `dist/`).

## Coding Style & Naming Conventions

- ESM everywhere; follow the style of the file youâ€™re editing and avoid reformat-only diffs.
- Frontend (`src/`): typically 2-space indentation and single quotes.
- Backend (`server/`): semicolons are common; prefer `async/await` and explicit error handling.
- Naming: React components `PascalCase.jsx`; hooks `useThing.*`; utilities `camelCase`.

## Testing Guidelines

- No dedicated test runner is configured yet. Do a quick smoke test for changes:
  - `npm run dev`, open `http://localhost:<PORT>`, and verify login, chat, file tree, and git flows.

## Commit & Pull Request Guidelines

- Use Conventional Commit-style subjects (seen in history: `fix: ...`, `feat: ...`, `update: ...`).
- Keep commits focused; if you touch auth/database behavior, include relevant updates under `server/database/`.
- PRs should include: clear description, repro steps, screenshots for UI changes, and notes for any new env vars (update `.env.example` when applicable).

## Security & Configuration Tips

- Never commit secrets or local state: `.env`, SQLite DB files (for example `server/database/auth.db`), tokens, or keys.
- Some agent/tools permissions are intentionally conservative by default; document any required settings changes in your PR.
